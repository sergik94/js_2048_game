parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e){return s(e)||a(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function s(e){if(Array.isArray(e))return n(e)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var c,u=document.querySelector(".game-field"),o=document.querySelector(".supporting-field"),l=document.querySelector("tbody"),i=document.querySelectorAll("td"),d=l.rows.length,f=document.querySelector(".start"),m=[2,2,2,2,4],b=document.querySelector(".game-score"),N=document.querySelector(".message-start"),y=document.querySelector(".message-lose"),v=document.querySelector(".message-win"),p=0,w=0,h=100;function L(e){return Math.floor(Math.random()*e.length)}function T(){var t=e(i).filter(function(e){return""===e.dataset.currNumb}),r=m[L(m)],a=t[L(t)];a.classList.add("field-cell--".concat(r)),a.innerHTML=r,a.dataset.currNumb=r}function k(e){N.classList.add("hidden"),T(),T(),e.target.blur(),f.addEventListener("click",g),f.removeEventListener("click",k),f.classList.remove("start"),f.classList.add("restart"),f.innerHTML="Restart",document.addEventListener("keydown",H)}function g(t){e(i).forEach(function(e){e.dataset.currNumb="",e.className="field-cell",e.innerHTML=""}),T(),T(),t.target.blur(),b.innerHTML=0,y.classList.add("hidden"),v.classList.add("hidden")}function S(e){var t=document.createElement("span");document.querySelector(".info").append(t),t.className="local-score",t.innerHTML="+"+e,t.style.transitionDuration="1s",setTimeout(function(){t.style.bottom="15px",t.style.opacity=0},200),setTimeout(function(){t.remove()},1e3*parseInt("1s"))}function M(e,t,r){var a=document.createElement("div"),s=!1;a.style.left=e.offsetLeft+"px",a.style.top=e.offsetTop+"px",a.style.width=e.clientWidth+"px",a.style.height=e.clientHeight+"px",a.className="\n    active-cell\n    field-cell\n    field-cell--".concat(e.innerText,"\n  "),a.innerHTML=e.innerText,a.dataset.currNumb=e.dataset.currNumb,a.style.transitionDuration=h+"ms",o.append(a),e.className="field-cell",e.innerHTML="",e.dataset.currNumb="",37!==r.keyCode&&39!==r.keyCode||(a.style.left=t.offsetLeft+"px"),38!==r.keyCode&&40!==r.keyCode||(a.style.top=t.offsetTop+"px"),t.dataset.currNumb===a.dataset.currNumb?(t.style.transitionDuration=h+"ms",t.dataset.currNumb*=2,p+=+t.dataset.currNumb,w+=+t.dataset.currNumb,b.innerHTML=p,s=!0):t.dataset.currNumb=a.dataset.currNumb,(c=new Promise(function(e){setTimeout(function(){t.innerHTML=t.dataset.currNumb,t.classList.add("field-cell--".concat(t.dataset.currNumb)),a.innerHTML=t.dataset.currNumb,a.classList.add("field-cell--".concat(t.dataset.currNumb)),"2048"===t.innerHTML&&v.classList.remove("hidden"),s&&(a.style.transform="scale(1.2)"),setTimeout(function(){a.style.transform="scale(1)",e()},h)},h)})).then(function(){return a.remove()})}function H(t){t.preventDefault();var r=!1;if(37===t.keyCode)for(var a=0;a<d;a++)for(var s=!1,n=1;n<d;n++){var u=l.rows[a].cells[n];if(""!==u.dataset.currNumb){var o=n;do{o--;var f=l.rows[a].cells[o];if(f.dataset.currNumb!==u.dataset.currNumb&&""!==f.dataset.currNumb){o++,s=!1;break}if(f.dataset.currNumb===u.dataset.currNumb){s?(s=!1,o++):s=!0;break}}while(o>0);if(o!==n)M(u,l.rows[a].cells[o],t),r=!0}}if(38===t.keyCode)for(var m=0;m<d;m++)for(var b=!1,N=1;N<d;N++){var v=l.rows[N].cells[m];if(""!==v.dataset.currNumb){var p=N;do{p--;var h=l.rows[p].cells[m];if(h.dataset.currNumb!==v.dataset.currNumb&&""!==l.rows[p].cells[m].dataset.currNumb){p++,b=!1;break}if(h.dataset.currNumb===v.dataset.currNumb){b?(b=!1,p++):b=!0;break}}while(p>0);if(p!==N)M(v,l.rows[p].cells[m],t),r=!0}}if(39===t.keyCode)for(var L=0;L<d;L++)for(var k=!1,g=d-2;g>=0;g--){var H=l.rows[L].cells[g];if(""!==H.dataset.currNumb){var x=g;do{x++;var q=l.rows[L].cells[x];if(q.dataset.currNumb!==H.dataset.currNumb&&""!==q.dataset.currNumb){x--,k=!1;break}if(q.dataset.currNumb===H.dataset.currNumb){k?(k=!1,x--):k=!0;break}}while(x<d-1);if(x!==g)M(H,l.rows[L].cells[x],t),r=!0}}if(40===t.keyCode)for(var C=0;C<d;C++)for(var E=!1,A=d-2;A>=0;A--){var j=l.rows[A].cells[C];if(""!==j.dataset.currNumb){var D=A;do{D++;var I=l.rows[D].cells[C];if(I.dataset.currNumb!==j.dataset.currNumb&&""!==I.dataset.currNumb){D--,E=!1;break}if(I.dataset.currNumb===j.dataset.currNumb){E?(E=!1,D--):E=!0;break}}while(D<d-1);if(D!==A)M(j,l.rows[D].cells[C],t),r=!0}}r&&(c.then(function(){if(T(),0===e(i).filter(function(e){return""===e.dataset.currNumb}).length){for(var t=0;t<d;t++)for(var r=1;r<d;r++){var a=l.rows[t].cells[r],s=l.rows[t].cells[r-1],n=l.rows[r].cells[t],c=l.rows[r-1].cells[t];if(a.dataset.currNumb===s.dataset.currNumb||n.dataset.currNumb===c.dataset.currNumb)return}y.classList.remove("hidden")}}),r=!1),w>0&&(S(w),w=0)}o.style.top=u.offsetTop+"px",o.style.left=u.offsetLeft+"px",e(i).forEach(function(e){e.dataset.currNumb=""}),f.addEventListener("click",k);
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.2b83c17a.js.map